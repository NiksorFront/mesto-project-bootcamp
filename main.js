(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){e.classList.add("popup_opened")}function n(e){e.classList.remove("popup_opened")}function o(e){e.querySelector(".popup__container").addEventListener("click",(function(e){e._isClickWithInModal=!0})),e.addEventListener("click",(function(t){t._isClickWithInModal||n(e)})),window.addEventListener("keydown",(function(t){"Escape"===t.key&&n(e)}))}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];t.forEach((function(e){n.push(e.validity.valid)}));var o=e.querySelector(".form__button-submit");t.forEach((function(e,t){e.addEventListener("input",(function(r){n[t]=r.target.validity.valid,n[t]?e.nextElementSibling.textContent="":e.nextElementSibling.textContent=r.target.validationMessage,n.every((function(e){return!0===e}))?(o.classList.remove("form__button-submit_block"),o.disabled=!1):(o.classList.add("form__button-submit_block"),o.disabled=!0)}))}))}e.d({},{YS:()=>q,c4:()=>w,Vw:()=>j,Ph:()=>g,xS:()=>y});var c=document.querySelector(".elements"),a=document.querySelector("#card-template").content.querySelector(".element");function i(e){var r=a.cloneNode(!0),c=r.querySelector(".element__img"),i=r.querySelector(".element__like"),d=r.querySelector(".element__delete"),l=r.querySelector(".element__number-of-like");return r.querySelector(".element__title").textContent=e.name,c.alt=e.name,c.src=e.link,l.textContent=e.likes,e.likeOwner.includes(y)&&(l.textContent-=1,u(i,l)),i.addEventListener("click",(function(){var t,n;u(i,l),t=i,n=e.cardId,t.classList.contains("element__like_set")?fetch("https://nomoreparties.co/v1/wbf-cohort-14/cards/likes/".concat(n),{method:"PUT",headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80"}}).catch((function(e){console.log(e)})):fetch("https://nomoreparties.co/v1/wbf-cohort-14/cards/likes/".concat(n),{method:"DELETE",headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80"}}).catch((function(e){console.log(e)}))})),e.idOwner==y?d.addEventListener("click",(function(){t(j),j.querySelector(".form__button-submit").addEventListener("click",(function(){return t=e,r.remove(),o=t.cardId,fetch("https://nomoreparties.co/v1/wbf-cohort-14/cards/".concat(o),{method:"DELETE",headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80"}}).catch((function(e){console.log(e)})),void n(j);var t,o}))})):d.style.display="none",r.querySelector("#card-image").addEventListener("click",(function(){!function(e,r){var c=document.querySelector("#big-img"),a=c.querySelector(".form__img"),i=c.querySelector(".form_img__title");a.src=e.getAttribute("src"),a.alt=e.getAttribute("alt"),i.textContent=r,c.querySelector(".popup__close").addEventListener("click",(function(){return n(c)})),o(c),t(c)}(c,e.name)})),r}function u(e,t){e.classList.contains("element__like_set")?(e.classList.remove("element__like_set"),t.textContent=Number(t.textContent)-1):(e.classList.add("element__like_set"),t.textContent=Number(t.textContent)+1)}var d=document.getElementById("name_place"),l=document.getElementById("link_photo"),s=document.forms.form_create;s.addEventListener("submit",(function(e){e.preventDefault(),function(e,t){return fetch("https://nomoreparties.co/v1/wbf-cohort-14/cards",{method:"POST",headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80","Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).catch((function(e){console.log(e)}))}(d.value,l.value).then((function(e){c.insertAdjacentElement("afterBegin",i({name:d.value,link:l.value,likes:"0",likeOwner:[],idOwner:y,cardId:"0"}))})).catch((function(e){console.log(e)})),n(w)})),r(s,[d,l]),fetch("https://nomoreparties.co/v1/wbf-cohort-14/users/me",{headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80"}}).then((function(e){if(e.ok)return e.json()})).then((function(e){f.textContent=e.name,v.textContent=e.about})).catch((function(e){console.log(e)})),fetch("https://nomoreparties.co/v1/wbf-cohort-14/users/me",{headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80"}}).then((function(e){if(e.ok)return e.json()})).then((function(e){var t=e.avatar;document.querySelector(".avatar__img").src=t,p.value=t})).catch((function(e){console.log(e)}));var f=document.querySelector(".profile__name"),m=document.getElementById("name");m.value=f.textContent;var v=document.querySelector(".profile__subtitle"),h=document.getElementById("type_of_activity");h.value=v.textContent;var _=document.forms.name_jod;r(_,[m,h]),_.addEventListener("submit",(function(e){var t,o;e.preventDefault(),t=m.value,o=h.value,fetch("https://nomoreparties.co/v1/wbf-cohort-14/users/me",{method:"PATCH",headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80","Content-Type":"application/json"},body:JSON.stringify({name:t,about:o})}).then((function(e){if(e.ok)return e.json()})).then((function(e){f.textContent=e.name,v.textContent=e.about})).catch((function(e){console.log(e)})),n(g)}));var p=document.getElementById("img_url_avatar"),b=document.forms.img_url;r(b,[p]),b.addEventListener("submit",(function(e){var t;e.preventDefault(),t=p.value,fetch("https://nomoreparties.co/v1/wbf-cohort-14/users/me/avatar",{method:"PATCH",headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80","Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(e){if(e.ok)return e.json()})).then((function(e){document.querySelector(".avatar__img").src=e.avatar})).catch((function(e){console.log(e)})),n(q)})),fetch("https://nomoreparties.co/v1/wbf-cohort-14/cards",{headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80"}}).then((function(e){if(e.ok)return e.json()})).then((function(e){e.forEach((function(e){var t={name:e.name,link:e.link,likes:e.likes.length,likeOwner:e.likes.map((function(e){return e._id})),idOwner:e.owner._id,cardId:e._id};c.insertAdjacentElement("beforeEnd",i(t))}))})).catch((function(e){return console.log(e.status)}));var y="b09410dd327b29c0eab9f06b",k=document.querySelector(".profile__edit-button"),g=document.querySelector("#edit-card"),E=g.querySelector(".popup__close");k.addEventListener("click",(function(){return t(g)})),E.addEventListener("click",(function(){return n(g)})),o(g);var S=document.querySelector(".avatar"),q=document.querySelector("#edit-img"),L=q.querySelector(".popup__close");S.addEventListener("click",(function(){return t(q)})),L.addEventListener("click",(function(){return n(q)})),o(q);var C=document.querySelector(".button-add"),w=document.querySelector("#create-card"),x=w.querySelector(".popup__close");C.addEventListener("click",(function(){return t(w)})),x.addEventListener("click",(function(){return n(w)})),o(w);var j=document.querySelector("#delete-card");j.querySelector(".popup__close").addEventListener("click",(function(){return n(j)})),o(j)})();