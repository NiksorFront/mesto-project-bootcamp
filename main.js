/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t,e,n,r,o={542:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(){o=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new B(r||[]);return a(i,"_invoke",{value:C(t,n,c)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var p="suspendedStart",m="suspendedYield",v="executing",y="completed",_={};function b(){}function g(){}function x(){}var w={};f(w,u,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(T([])));E&&E!==n&&i.call(E,u)&&(w=E);var L=x.prototype=b.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function q(t,e){function n(o,a,c,u){var s=d(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==r(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,u)}))}u(s.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}})}function C(e,n,r){var o=p;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===_)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var s=d(e,n,r);if("normal"===s.type){if(o=r.done?y:m,s.arg===_)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function j(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,_;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return g.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:g,configurable:!0}),g.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},k(q.prototype),f(q.prototype,s,(function(){return this})),e.AsyncIterator=q,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new q(h(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(L),f(L,l,"Generator"),f(L,u,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}function i(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(t){i(a,r,o,c,u,"next",t)}function u(t){i(a,r,o,c,u,"throw",t)}c(void 0)}))}}n.d(e,{Kx:()=>d,WY:()=>s,ei:()=>m,v2:()=>f});var c={headers:{authorization:"dfad8615-a69b-4969-abcf-da90e50e7e80","Content-Type":"application/json"}};function u(t){return t.ok?t.json():t.json().then((function(t){return Promise.reject(t)}))}function s(t){return l.apply(this,arguments)}function l(){return(l=a(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{headers:{authorization:c.headers.authorization}});case 2:return n=t.sent,t.next=5,u(n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t,e,n){return h.apply(this,arguments)}function h(){return(h=a(o().mark((function t(e,n,r){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{method:n,headers:{authorization:c.headers.authorization,"Content-Type":c.headers["Content-Type"]},body:JSON.stringify(r)});case 2:return i=t.sent,t.next=5,u(i);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t,e){return p.apply(this,arguments)}function p(){return(p=a(o().mark((function t(e,n){var r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.classList.contains("element__like_set")){t.next=9;break}return t.next=3,fetch("https://nomoreparties.co/v1/wbf-cohort-14/cards/likes/".concat(n),{method:"PUT",headers:{authorization:c.headers.authorization}});case 3:return r=t.sent,t.next=6,u(r);case 6:case 14:return t.abrupt("return",t.sent);case 9:return t.next=11,fetch("https://nomoreparties.co/v1/wbf-cohort-14/cards/likes/".concat(n),{method:"DELETE",headers:{authorization:c.headers.authorization}});case 11:return i=t.sent,t.next=14,u(i);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return v.apply(this,arguments)}function v(){return(v=a(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://nomoreparties.co/v1/wbf-cohort-14/cards/".concat(e),{method:"DELETE",headers:{authorization:c.headers.authorization}});case 2:return n=t.sent,t.next=5,u(n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},177:(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{L:()=>f,f:()=>h});var o=n(113),i=n(686),a=n(295),c=n(542),u=t([i,a]);[i,a]=u.then?(await u)():u;var s=[""],l=document.querySelector("#card-template").content.querySelector(".element");function f(t){var e=l.cloneNode(!0),n=e.querySelector(".element__img"),r=e.querySelector(".element__like"),c=e.querySelector(".element__delete"),u=e.querySelector(".element__number-of-like");e.querySelector(".element__title").textContent=t.name,n.alt=t.name,n.src=t.link,e.id=t._id,u.textContent=t.likes.length;var f=t.likes.map((function(t){return t._id}));return f.includes(a.xS)&&(u.textContent=d(r,u.textContent)),r.addEventListener("click",(function(){u.textContent=d(r,u.textContent,t._id)})),t.owner._id===a.xS?c.addEventListener("click",(function(){(0,o.M)(a.Vw),s[0]=e.id})):c.remove(),e.querySelector("#card-image").addEventListener("click",(function(){(0,i.df)(n,t.name)})),e}function h(){a.xZ.textContent="Удаление...",(0,c.ei)(s[0]).then((function(){document.getElementById(s[0]).remove(),a.xZ.textContent="Да",(0,o.j)(a.Vw)})).catch((function(t){return console.log(t)}))}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return t.classList.contains("element__like_set")?(t.classList.remove("element__like_set"),e=Number(e)-1):(t.classList.add("element__like_set"),e=Number(e)+1),void 0!==n?((0,c.Kx)(t,n).then((function(e){t.nextElementSibling.textContent=e.likes.length})).catch((function(e){t.classList.remove("element__like_set"),t.nextElementSibling.textContent="нет инета"})),e):e-1}r()}catch(p){r(p)}}))},686:(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{ZP:()=>v,_u:()=>w,df:()=>k,nx:()=>g,ri:()=>b,u2:()=>p});var o=n(113),i=n(197),a=n(542),c=n(295),u=n(177),s=t([c,u]);[c,u]=s.then?(await s)():s;var l=document.querySelector("#big-img"),f=l.querySelector(".form__img"),h=l.querySelector(".form_img__title"),d=l.querySelector(".popup__close");function k(t,e){f.src=t.getAttribute("src"),f.alt=t.getAttribute("alt"),h.textContent=e,d.addEventListener("click",(function(){return(0,o.j)(l)})),(0,o.M)(l)}var p=document.querySelector(".profile__name"),m=document.getElementById("name");m.value=p.textContent;var v=document.querySelector(".profile__subtitle"),y=document.getElementById("type_of_activity");y.value=v.textContent;var _=document.forms.name_jod;function q(t){t.preventDefault();var e=_.querySelector(".form__button-submit");e.textContent="Сохранение...",(0,a.v2)("https://nomoreparties.co/v1/wbf-cohort-14/users/me","PATCH",{name:m.value,about:y.value}).then((function(t){p.textContent=t.name,v.textContent=t.about,e.textContent="Сохранить",(0,o.j)(c.Ph)})).catch((function(t){return console.log(t)}))}(0,i.u)({form:_,inputFields:[m,y],submitButtonSelector:".form__button-submit",inactiveButtonClass:"form__button-submit_block"}),_.addEventListener("submit",q);var b=document.querySelector(".avatar__img"),g=document.getElementById("img_url_avatar");g.value=b.src;var x=document.forms.img_url;function C(t){t.preventDefault();var e=x.querySelector(".form__button-submit");e.textContent="Сохранение...",(0,a.v2)("https://nomoreparties.co/v1/wbf-cohort-14/users/me/avatar","PATCH",{avatar:g.value}).then((function(t){b.src=t.avatar,e.textContent="Сохранить",(0,o.j)(c.YS)})).catch((function(t){return console.log(t)}))}(0,i.u)({form:x,inputFields:[g],submitButtonSelector:".form__button-submit",inactiveButtonClass:"form__button-submit_block"}),x.addEventListener("submit",C);var w=document.querySelector(".elements"),S=document.getElementById("name_place"),E=document.getElementById("link_photo"),L=document.forms.form_create;L.addEventListener("submit",(function(t){t.preventDefault();var e=L.querySelector(".form__button-submit");e.textContent="Сохранение...",(0,a.v2)("https://nomoreparties.co/v1/wbf-cohort-14/cards","POST",{name:S.value,link:E.value}).then((function(t){w.prepend((0,u.L)(t)),e.textContent="Создать",(0,o.j)(c.c4)})).catch((function(t){return console.log(t)})),S.value="",E.value=""})),(0,i.u)({form:L,inputFields:[S,E],submitButtonSelector:".form__button-submit",inactiveButtonClass:"form__button-submit_block"}),r()}catch(j){r(j)}}))},113:(t,e,n)=>{function r(t){t.classList.add("popup_opened"),function(t){t.addEventListener("click",a),document.addEventListener("keydown",i)}(t)}function o(t){t.classList.remove("popup_opened"),document.removeEventListener("keydown",i),t.removeEventListener("click",a)}function i(t){"Escape"===t.key&&o(document.querySelector(".popup_opened"))}function a(t){t.target.classList.contains("popup")&&o(document.querySelector(".popup_opened"))}n.d(e,{M:()=>r,j:()=>o})},197:(t,e,n)=>{function r(t){var e=[];t.inputFields.forEach((function(t){e.push(t.validity.valid)}));var n=t.form.querySelector(t.submitButtonSelector);t.inputFields.forEach((function(r,o){r.addEventListener("input",(function(i){e[o]=i.target.validity.valid,e[o]?r.nextElementSibling.textContent="":r.nextElementSibling.textContent=i.target.validationMessage,e.every((function(t){return!0===t}))?(n.classList.remove(t.inactiveButtonClass),n.disabled=!1):(n.classList.add(t.inactiveButtonClass),n.disabled=!0)}))}))}n.d(e,{u:()=>r})},295:(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{Ph:()=>f,Vw:()=>b,YS:()=>p,c4:()=>y,xS:()=>s,xZ:()=>g});var o=n(177),i=n(113),a=n(542),c=n(686),u=t([o,c]);[o,c]=u.then?(await u)():u;var s=await(0,a.WY)("https://nomoreparties.co/v1/wbf-cohort-14/users/me").then((function(t){return c.ri.src=t.avatar,c.nx.value=c.ri.src,c.u2.textContent=t.name,c.ZP.textContent=t.about,t._id})).catch((function(t){return console.log("Упс, кажется что-то рипнулось. Ошибка:",t)}));await(0,a.WY)("https://nomoreparties.co/v1/wbf-cohort-14/cards").then((function(t){t.forEach((function(t){return c._u.append((0,o.L)(t))}))})).catch((function(t){return console.log(t.status)}));var l=document.querySelector(".profile__edit-button"),f=document.querySelector("#edit-card"),h=f.querySelector(".popup__close");l.addEventListener("click",(function(){return(0,i.M)(f)})),h.addEventListener("click",(function(){return(0,i.j)(f)}));var d=document.querySelector(".avatar"),p=document.querySelector("#edit-img"),m=p.querySelector(".popup__close");d.addEventListener("click",(function(){return(0,i.M)(p)})),m.addEventListener("click",(function(){return(0,i.j)(p)}));var v=document.querySelector(".button-add"),y=document.querySelector("#create-card"),_=y.querySelector(".popup__close");v.addEventListener("click",(function(){return(0,i.M)(y)})),_.addEventListener("click",(function(){return(0,i.j)(y)}));var b=document.querySelector("#delete-card"),g=b.querySelector(".form__button-submit");b.querySelector(".popup__close").addEventListener("click",(function(){(0,i.j)(b)})),g.addEventListener("click",o.f),r()}catch(t){r(t)}}),1)}},i={};function a(t){var e=i[t];if(void 0!==e)return e.exports;var n=i[t]={exports:{}};return o[t](n,n.exports,a),n.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},a.a=(o,i,a)=>{var c;a&&((c=[]).d=-1);var u,s,l,f=new Set,h=o.exports,d=new Promise(((t,e)=>{l=e,s=t}));d[e]=h,d[t]=t=>(c&&t(c),f.forEach(t),d.catch((t=>{}))),o.exports=d,i((o=>{var i;u=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var i=[];i.d=0,o.then((t=>{a[e]=t,r(i)}),(t=>{a[n]=t,r(i)}));var a={};return a[t]=t=>t(i),a}}var c={};return c[t]=t=>{},c[e]=o,c})))(o);var a=()=>u.map((t=>{if(t[n])throw t[n];return t[e]})),s=new Promise((e=>{(i=()=>e(a)).r=0;var n=t=>t!==c&&!f.has(t)&&(f.add(t),t&&!t.d&&(i.r++,t.push(i)));u.map((e=>e[t](n)))}));return i.r?s:a()}),(t=>(t?l(d[n]=t):s(h),r(c)))),c&&c.d<0&&(c.d=0)},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a(295)})();